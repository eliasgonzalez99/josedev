<section id="habilidades">
  <div class="wrap">
    <p class="s-label reveal">Stack técnico &amp; habilidades</p>

    <div class="skills-grid">

      <div class="skills-col">
        <h3 class="skills-group-title mono reveal">Lenguajes &amp; frameworks</h3>

        <div class="skill-row reveal reveal-delay-1">
          <span class="skill-name">Go</span>
          <div class="skill-bar"><div class="skill-fill" style="width:92%"></div></div>
          <span class="skill-level">Avanzado</span>
        </div>
        <div class="skill-row reveal reveal-delay-1">
          <span class="skill-name">TypeScript</span>
          <div class="skill-bar"><div class="skill-fill" style="width:88%"></div></div>
          <span class="skill-level">Avanzado</span>
        </div>
        <div class="skill-row reveal reveal-delay-2">
          <span class="skill-name">Python</span>
          <div class="skill-bar"><div class="skill-fill" style="width:80%"></div></div>
          <span class="skill-level">Sólido</span>
        </div>
        <div class="skill-row reveal reveal-delay-2">
          <span class="skill-name">SQL / PostgreSQL</span>
          <div class="skill-bar"><div class="skill-fill" style="width:85%"></div></div>
          <span class="skill-level">Sólido</span>
        </div>
        <div class="skill-row reveal reveal-delay-3">
          <span class="skill-name">React / Next.js</span>
          <div class="skill-bar"><div class="skill-fill" style="width:72%"></div></div>
          <span class="skill-level">Competente</span>
        </div>
        <div class="skill-row reveal reveal-delay-3">
          <span class="skill-name">Rust</span>
          <div class="skill-bar"><div class="skill-fill" style="width:45%"></div></div>
          <span class="skill-level">Aprendiendo</span>
        </div>

        <h3 class="skills-group-title mono reveal" style="margin-top:2.5rem">Infraestructura &amp; DevOps</h3>

        <div class="skill-row reveal reveal-delay-1">
          <span class="skill-name">Kubernetes / GKE</span>
          <div class="skill-bar"><div class="skill-fill" style="width:85%"></div></div>
          <span class="skill-level">Avanzado</span>
        </div>
        <div class="skill-row reveal reveal-delay-1">
          <span class="skill-name">Docker</span>
          <div class="skill-bar"><div class="skill-fill" style="width:90%"></div></div>
          <span class="skill-level">Avanzado</span>
        </div>
        <div class="skill-row reveal reveal-delay-2">
          <span class="skill-name">Terraform / IaC</span>
          <div class="skill-bar"><div class="skill-fill" style="width:78%"></div></div>
          <span class="skill-level">Sólido</span>
        </div>
        <div class="skill-row reveal reveal-delay-2">
          <span class="skill-name">AWS / GCP</span>
          <div class="skill-bar"><div class="skill-fill" style="width:82%"></div></div>
          <span class="skill-level">Sólido</span>
        </div>
        <div class="skill-row reveal reveal-delay-3">
          <span class="skill-name">CI/CD (GitHub Actions)</span>
          <div class="skill-bar"><div class="skill-fill" style="width:88%"></div></div>
          <span class="skill-level">Avanzado</span>
        </div>
      </div>

      <div class="skills-col">
        <h3 class="skills-group-title mono reveal">Áreas de especialidad</h3>

        <div class="competencias-grid">
          <div class="comp-card reveal reveal-delay-1">
            <span class="comp-icon">◈</span>
            <span class="comp-title">Sistemas distribuidos</span>
          </div>
          <div class="comp-card reveal reveal-delay-1">
            <span class="comp-icon">◈</span>
            <span class="comp-title">Diseño de APIs REST / gRPC</span>
          </div>
          <div class="comp-card reveal reveal-delay-2">
            <span class="comp-icon">◈</span>
            <span class="comp-title">Arquitectura de microservicios</span>
          </div>
          <div class="comp-card reveal reveal-delay-2">
            <span class="comp-icon">◈</span>
            <span class="comp-title">Event-driven con Kafka</span>
          </div>
          <div class="comp-card reveal reveal-delay-3">
            <span class="comp-icon">◈</span>
            <span class="comp-title">Observabilidad &amp; SRE</span>
          </div>
          <div class="comp-card reveal reveal-delay-3">
            <span class="comp-icon">◈</span>
            <span class="comp-title">Optimización de bases de datos</span>
          </div>
          <div class="comp-card reveal reveal-delay-4">
            <span class="comp-icon">◈</span>
            <span class="comp-title">Seguridad (OAuth2, mTLS)</span>
          </div>
          <div class="comp-card reveal reveal-delay-4">
            <span class="comp-icon">◈</span>
            <span class="comp-title">Code review &amp; mentoría</span>
          </div>
        </div>

        <h3 class="skills-group-title mono reveal" style="margin-top:2.5rem">Idiomas</h3>
        <div class="skill-row reveal reveal-delay-1" style="grid-template-columns: 1fr 1fr auto;">
          <span class="skill-name">Español</span>
          <div class="skill-bar"><div class="skill-fill" style="width:100%"></div></div>
          <span class="skill-level">Nativo</span>
        </div>
        <div class="skill-row reveal reveal-delay-2" style="grid-template-columns: 1fr 1fr auto;">
          <span class="skill-name">Inglés</span>
          <div class="skill-bar"><div class="skill-fill" style="width:80%"></div></div>
          <span class="skill-level">Profesional</span>
        </div>

        <h3 class="skills-group-title mono reveal" style="margin-top:2.5rem">Intereses</h3>
        <div class="hobbies-row reveal reveal-delay-1">
          <span class="tag">Open Source</span>
          <span class="tag">Sistemas operativos</span>
          <span class="tag">Criptografía</span>
          <span class="tag">Lectura técnica</span>
          <span class="tag">Ciclismo</span>
        </div>
      </div>

    </div>
  </div>
</section>

<style>
  .skills-grid {
    display: grid;
    grid-template-columns: 1.1fr 1fr;
    gap: 5rem;
    align-items: start;
  }

  .skills-group-title {
    font-size: 0.58rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--accent);
    margin-bottom: 1.5rem;
    font-weight: 500;
  }

  /* Override global skill-row to restore full 3-col layout */
  .skill-row {
    grid-template-columns: 140px 1fr 80px;
  }

  /* Animate skill bars on reveal */
  .skill-fill {
    width: 0 !important;
    transition: width 1s cubic-bezier(0.4, 0, 0.2, 1) 0.3s;
  }
  .reveal.visible .skill-fill {
    width: var(--fill-width, 80%) !important;
  }

  .competencias-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.5rem;
  }

  .comp-card {
    display: flex;
    align-items: flex-start;
    gap: 0.6rem;
    padding: 0.7rem 0.9rem;
    background: var(--surface);
    border: 1px solid var(--subtle);
    border-radius: var(--r);
    transition: border-color var(--transition), background var(--transition), transform var(--transition);
    cursor: default;
  }
  .comp-card:hover {
    border-color: var(--accent-dim);
    background: var(--surface2);
    transform: translateY(-1px);
  }

  .comp-icon {
    color: var(--accent-dim);
    font-size: 0.55rem;
    flex-shrink: 0;
    margin-top: 0.1rem;
  }
  .comp-title {
    font-size: 0.78rem;
    color: var(--text-2);
    line-height: 1.35;
  }

  .hobbies-row { display: flex; flex-wrap: wrap; gap: 0.4rem; }

  @media (max-width: 720px) {
    .skills-grid { grid-template-columns: 1fr; gap: 3rem; }
    .competencias-grid { grid-template-columns: 1fr; }
    .skill-row { grid-template-columns: 1fr 1fr 70px; }
  }
</style>

<script>
  // Animate skill bars when they become visible
  document.querySelectorAll('.skill-row').forEach(row => {
    const fill = row.querySelector<HTMLElement>('.skill-fill');
    if (!fill) return;
    const targetWidth = fill.style.width || '80%';
    fill.style.setProperty('--fill-width', targetWidth);
    fill.style.width = '0';

    const obs = new IntersectionObserver(entries => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          setTimeout(() => { fill.style.width = targetWidth; }, 200);
          obs.unobserve(e.target);
        }
      });
    }, { threshold: 0.3 });
    obs.observe(row);
  });
</script>